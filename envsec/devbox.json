{
  "packages": [
    "go@latest",
    "golangci-lint@latest"
  ],
  "shell": {
    "init_hook": [
      "export \"GOROOT=$(go env GOROOT)\"",
      "export \"PATH=$(pwd)/dist:$PATH\""
    ],
    "scripts": {
      "build": "go build -o dist/envsec cmd/envsec/main.go",
      "lint": "golangci-lint run -c ../.golangci.yml",
      "test": "go test ./...",
      "login-dev": [
       "echo 'WARNING: auth-service from frontend must be running locally'",
        // set ENVSEC_JETPACK_API_ENDPOINT to localhost:8080 if running apisvc locally
        // "export ENVSEC_JETPACK_API_ENDPOINT=http://localhost:8080",
        "echo 'building envsec.' && devbox run build",
        "dist/envsec auth login --dev",
      ],
    }
  },
  "nixpkgs": {
    "commit": "f80ac848e3d6f0c12c52758c0f25c10c97ca3b62"
  }
}
